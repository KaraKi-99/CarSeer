@model CarSeer.ViewModels.VehicleTypeVM

<div class="m-3">
    <h2 class="m-1">Vehicle Types</h2>
    <form method="get" id="vehicleTypeForm" asp-action="GetVehicleType">
        <div class="card mt-4">
            <div class="card-header">
                <h4>Search Criteria</h4>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-3 mr-4">
                        <label class="form-label">Make ID: </label>
                        <input type="text" asp-for="MakeId" class="form-control text-center" placeholder="Make ID" required />
                    </div>
                </div>
                <button type="submit" class="btn btn-primary mt-3">Search</button>
            </div>
        </div>
        <div class="card mt-4">
            <div class="card-header">
                <div class="form-group">
                    <div class="col-md-3">
                        <label class="form-label" for="pageSize">Page Size:</label>
                        <select class="form-select" asp-for="PageSize" id="pageSize" name="pageSize" onchange="checkRequiredFields()">
                            <option value="10">10</option>
                            <option value="20">20</option>
                            <option value="50">50</option>
                        </select>
                    </div>
                </div>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col">
                        <label class="form-label fw-bold">
                            Vehicle Type Id
                        </label>
                    </div>
                    <div class="col">
                        <label class="form-label fw-bold">
                            Vehicle Type Name
                        </label>
                    </div>
                </div>
                @if (Model.Results != null)
                {
                    @foreach (var item in Model.Results)
                    {
                        <div class="row border-top pt-1">
                            <div class="col">
                                <label class="form-label">
                                    @item.VehicleTypeId
                                </label>
                            </div>
                            <div class="col">
                                <label class="form-label">
                                    @item.VehicleTypeName
                                </label>
                            </div>
                        </div>
                    }
                }
            </div>
        </div>
    </form>
    <div class="row mt-4">
        <nav aria-label="Page navigation">
            <ul class="pagination justify-content-center">
                <li class="page-item @(Model.CurrentPage == 1 ? "disabled" : "")">
                    <a class="page-link" href="?CurrentPage=@(Model.CurrentPage - 1)&pageSize=@Model.PageSize&MakeId=@Model.MakeId">Previous</a>
                </li>
                <li class="page-item @(Model.CurrentPage == Model.TotalPages ? "disabled" : "")">
                    <a class="page-link" href="?CurrentPage=@(Model.CurrentPage + 1)&pageSize=@Model.PageSize&MakeId=@Model.MakeId">Next</a>
                </li>
            </ul>
            <div class="pagination-info mt-3">
                <p>Page @Model.CurrentPage of @Model.TotalPages</p>
                <p>Total Types: @Model.TotalCount</p>
            </div>
        </nav>
    </div>
</div>

<script>
    function checkRequiredFields() {
        const form = document.getElementById('vehicleTypeForm');
        if (form.checkValidity()) {
            form.submit();
        } else {
            form.reportValidity();
        }
    }
</script>